---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Button from '../../components/ui/Button.astro';
import { getCollection } from 'astro:content';
import Breadcrumbs from '../../components/ui/Breadcrumbs.astro';

export async function getStaticPaths() {
  const team = await getCollection('team');
  return team.map((member) => ({ params: { slug: member.slug }, props: { member } }));
}

const { member } = Astro.props;
const { Content } = await member.render();
const seoTitle = `${member.data.name} | ${member.data.role} in Sampletown, MI`;
const seoDescription = `${member.data.name} provides ${member.data.role.toLowerCase()} at BrightSide Dental Studio with a comfort-focused, modern approach.`;
---

<BaseLayout title={seoTitle} description={seoDescription}>
  <section class="bg-surface-soft">
    <div class="mx-auto grid max-w-5xl items-center gap-8 px-4 py-12 md:grid-cols-[1fr_1.15fr] md:py-16">
      <div class="relative overflow-hidden rounded-3xl bg-surface shadow-card-soft ring-1 ring-surface-border">
        <img
          src={typeof member.data.headshot === 'string' ? member.data.headshot : member.data.headshot.src}
          alt={typeof member.data.headshot === 'string' ? member.data.name : member.data.headshot.alt ?? member.data.name}
          class="h-full w-full object-cover"
          loading="lazy"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-ink-900/20 via-transparent to-transparent"></div>
      </div>
      <div class="space-y-4">
        <Breadcrumbs items={[{ label: 'Home', href: '/' }, { label: 'About', href: '/about' }, { label: 'Team', href: '/team' }, { label: member.data.name }]} />
        <p class="text-xs font-semibold uppercase tracking-[0.18em] text-accent-500">Team</p>
        <h1 class="font-heading text-3xl tracking-tight text-ink-900 md:text-4xl">{member.data.name}</h1>
        <p class="text-sm font-semibold text-ink-500">{member.data.role}</p>
        <div class="flex flex-wrap gap-2 text-xs font-semibold uppercase tracking-wide text-ink-700">
          {member.data.credentials.map((cred) => (
            <span class="rounded-full bg-surface px-3 py-2 ring-1 ring-surface-border/80 shadow-card-soft" key={cred}>{cred}</span>
          ))}
        </div>
        <p class="text-base leading-relaxed text-ink-700">{member.data.bioShort}</p>
        <div class="flex flex-wrap gap-3">
          <Button href="/contact" variant="primary">Schedule with {member.data.name}</Button>
          <Button href="/services" variant="outline">Explore services</Button>
          <a
            href="https://www.linkedin.com"
            class="inline-flex items-center justify-center rounded-full border border-surface-border px-4 py-2 text-sm font-semibold text-ink-800 bg-surface hover:bg-surface-soft"
          >
            LinkedIn
          </a>
        </div>
      </div>
    </div>
  </section>
  <section class="bg-surface">
    <div class="prose prose-slate mx-auto max-w-3xl px-4 py-12 text-ink-700 md:py-16">
      <Content />
      <div class="mt-8 grid gap-4 md:grid-cols-2">
        <div class="rounded-2xl bg-surface-soft p-4 ring-1 ring-surface-border">
          <p class="mb-2 text-sm font-semibold text-ink-900">Clinical focus</p>
          <ul class="list-disc list-inside space-y-1 text-sm text-ink-700">
            <li>Comfort-focused family and cosmetic care in Sampletown</li>
            <li>Personalized plans with digital imaging and clear explanations</li>
            <li>Collaborative approachâ€”patients see options, costs, and timelines</li>
          </ul>
        </div>
        <div class="rounded-2xl bg-surface-soft p-4 ring-1 ring-surface-border">
          <p class="mb-2 text-sm font-semibold text-ink-900">How {member.data.name} can help</p>
          <ul class="list-disc list-inside space-y-1 text-sm text-ink-700">
            <li>Comfort-first visits with gentle techniques</li>
            <li>Phased care that fits your schedule and budget</li>
            <li>Seamless handoff to schedule, verify insurance, and plan next steps</li>
          </ul>
        </div>
      </div>
      <div class="mt-6 flex flex-wrap gap-3">
        <Button href="/new-patients" variant="primary">Request an appointment</Button>
        <Button href="/contact" variant="outline">Call our office</Button>
      </div>
    </div>
  </section>
</BaseLayout>
