---
import BaseLayout from '../layouts/BaseLayout.astro';
import Section from '../components/ui/Section.astro';
import Button from '../components/ui/Button.astro';
import { getEntry } from 'astro:content';

const site = await getEntry('siteSettings', 'practice');
const practice = {
  ...site.data,
  phoneHref: `tel:${site.data.phone.replace(/[^0-9+]/g, '')}`,
};
const hours = [
  { label: 'Mon-Thu', value: '8:00am – 5:00pm' },
  { label: 'Friday', value: '8:00am – 2:00pm' },
  { label: 'Saturday', value: 'By appointment' },
];
---

<BaseLayout
  title="Contact Us | BrightSide Dental Studio"
  description="Get in touch with BrightSide Dental Studio. Call, message, or visit us for family and cosmetic dentistry in Sampletown."
>
  <Section>
    <div class="grid gap-8 md:grid-cols-[1.1fr_0.9fr] items-start">
      <div class="space-y-4">
        <p class="text-sm uppercase tracking-wide text-primary font-semibold">Contact</p>
        <h1 class="text-3xl md:text-4xl font-heading text-neutral">We’re here to help</h1>
        <p class="text-sm text-gray-700">Call, text, or message us. We’ll answer questions, verify insurance, and help you plan your visit.</p>
        <div class="space-y-2 text-sm text-gray-700">
          <p><strong>Phone:</strong> <a href={practice.phoneHref} class="text-primary font-semibold">{practice.phone}</a></p>
          {practice.email && <p><strong>Email:</strong> <a href={`mailto:${practice.email}`} class="text-primary font-semibold">{practice.email}</a></p>}
          <p><strong>Address:</strong> {practice.addressLine1}{practice.addressLine2 ? `, ${practice.addressLine2}` : ''}, {practice.city}, {practice.state}</p>
        </div>
        <div class="space-y-1 text-sm text-gray-700">
          <p class="font-semibold text-neutral">Hours</p>
          {hours.map((entry) => (
            <p>{entry.label}: {entry.value}</p>
          ))}
        </div>
        <div class="flex flex-wrap gap-3">
          <Button href={practice.phoneHref} variant="primary">Call us</Button>
          {practice.googleMapsUrl && <Button href={practice.googleMapsUrl} variant="outline">Get directions</Button>}
        </div>
      </div>

      <div class="rounded-2xl bg-white p-4 shadow-card ring-1 ring-gray-100">
        <div class="aspect-video w-full overflow-hidden rounded-xl bg-gray-100">
          {practice.googleMapsUrl ? (
            <iframe title="Map to BrightSide Dental Studio" src={practice.googleMapsUrl} class="h-full w-full" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
          ) : (
            <div class="h-full w-full flex items-center justify-center text-sm text-gray-500">Map coming soon</div>
          )}
        </div>
      </div>
    </div>
  </Section>
</BaseLayout>
