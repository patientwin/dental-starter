---
import type { CollectionEntry } from 'astro:content';
import Button from '../ui/Button.astro';

export interface Props {
  doctor: CollectionEntry<'team'>;
}

const { doctor } = Astro.props;
---

<section class="bg-surface-soft">
  <div class="mx-auto flex max-w-6xl flex-col px-4 py-10 md:grid md:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)] md:items-center md:gap-10 md:py-16">
    <div class="order-1 md:order-2 relative">
      <div class="absolute inset-0 -z-10 translate-x-4 translate-y-4 rounded-3xl bg-gradient-to-br from-halo-blue via-surface-soft to-halo-mint blur-2xl" aria-hidden="true"></div>
      <div class="relative overflow-hidden rounded-3xl bg-surface shadow-card-soft ring-1 ring-surface-border">
        <img
          src={typeof doctor.data.headshot === 'string' ? doctor.data.headshot : doctor.data.headshot.src}
          alt={typeof doctor.data.headshot === 'string' ? doctor.data.name : doctor.data.headshot.alt ?? doctor.data.name}
          class="h-full w-full object-cover"
          loading="lazy"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-ink-900/10 via-transparent to-transparent"></div>
      </div>
    </div>
    <div class="order-2 mt-6 space-y-5 md:order-1 md:mt-0">
      <p class="text-xs font-semibold uppercase tracking-[0.18em] text-accent-500">Meet the doctor</p>
      <div class="space-y-2">
        <h2 class="font-heading text-3xl tracking-tight text-ink-900 md:text-4xl">{doctor.data.name}</h2>
        <p class="text-sm font-semibold text-ink-600">{doctor.data.role}</p>
      </div>
      <div class="flex flex-wrap gap-2 text-xs font-semibold uppercase tracking-wide text-ink-700">
        {doctor.data.credentials.map((cred) => (
          <span class="rounded-full bg-surface px-3 py-2 text-ink-700 ring-1 ring-surface-border/80 shadow-card-soft" key={cred}>
            {cred}
          </span>
        ))}
      </div>
      <p class="max-w-2xl text-base leading-relaxed text-ink-700">{doctor.data.bioShort}</p>
      <div class="mt-4 flex flex-col gap-3 sm:flex-row">
        <Button href={`/team/${doctor.slug}`} variant="primary" class="w-full px-5 py-2.5 text-sm font-semibold md:w-auto md:text-base">View bio</Button>
        <Button href="/contact" variant="ghost" class="w-full px-5 py-2.5 text-sm font-semibold text-ink-800 md:w-auto">Schedule a visit</Button>
      </div>
    </div>
  </div>
</section>
