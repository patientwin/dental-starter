---
import { secondaryNav } from '../../data/navigation';
import { getEntry } from "astro:content";

const practiceEntry = await getEntry("siteSettings", "practice");
const practice = practiceEntry?.data ?? Astro.props.practice;
const socials = Astro.props.socials ?? practice?.socials ?? [];
const year = new Date().getFullYear();
const footerNav = [
  { label: 'Services', href: '/services' },
  { label: 'Financing', href: '/financing' },
  { label: 'Reviews', href: '/reviews' },
  { label: 'Blog', href: '/blog' },
];
const hours = [
  { label: 'Mon-Thu', value: '8:00am – 5:00pm' },
  { label: 'Friday', value: '8:00am – 2:00pm' },
  { label: 'Saturday', value: 'By appointment' },
];
---

<footer class="mt-16 bg-gradient-to-tr from-ink-900 to-ink-700 text-ink-100 border-t border-surface-border/20">
  <div class="mx-auto max-w-6xl px-4 py-10 md:py-12 grid grid-cols-1 gap-10 md:grid-cols-4 md:gap-12">
    <div class="space-y-3 md:col-span-2">
      <p class="text-base font-semibold tracking-tight text-white">{practice?.practiceName}</p>
      <p class="text-sm text-ink-400">{practice?.tagline}</p>
      <div class="text-sm text-ink-400 space-y-1 leading-relaxed">
        <p>{practice?.addressLine1}{practice?.addressLine2 ? `, ${practice.addressLine2}` : ''}</p>
        <p>{practice?.city}{practice?.state ? `, ${practice.state}` : ''}</p>
      </div>
      <div class="text-sm text-ink-400 space-y-1 leading-relaxed">
        <p><a href={practice?.phone ? `tel:${practice.phone.replace(/[^0-9+]/g, '')}` : '#'} class="hover:text-white transition-colors">{practice?.phone}</a></p>
        {practice?.email && <p><a href={`mailto:${practice.email}`} class="hover:text-white transition-colors">{practice.email}</a></p>}
      </div>
    </div>

    <div class="space-y-4">
      <p class="text-xs font-semibold uppercase tracking-wide text-ink-300">Quick Links</p>
      <ul class="space-y-2 text-sm text-ink-400 leading-relaxed">
        {footerNav.map((item) => (
          <li><a href={item.href} class="hover:text-white transition-colors">{item.label}</a></li>
        ))}
      </ul>
      <p class="text-xs font-semibold uppercase tracking-wide text-ink-300 mt-6">Legal</p>
      <ul class="space-y-2 text-sm text-ink-400 leading-relaxed">
        {secondaryNav.map((item) => (
          <li><a href={item.href} class="hover:text-white transition-colors">{item.label}</a></li>
        ))}
      </ul>
    </div>

    <div class="space-y-4">
      <p class="text-xs font-semibold uppercase tracking-wide text-ink-300">Hours</p>
      <ul class="text-sm text-ink-400 space-y-1 leading-relaxed">
        {hours.map((entry) => (
          <li>{entry.label}: {entry.value}</li>
        ))}
      </ul>
    </div>

    <div class="space-y-4">
      <p class="text-xs font-semibold uppercase tracking-wide text-ink-300">Connect</p>
      <div class="flex flex-wrap gap-3 text-sm text-ink-400">
        {socials.map((social) => (
          <a href={social.href} class="hover:text-white transition-colors" key={social.label}>{social.label}</a>
        ))}
      </div>
    </div>
  </div>

  <div class="border-t border-ink-800 px-4 py-4 text-center text-xs text-ink-500">
    © {year} {practice?.practiceName} · Dentist in {practice?.city}{practice?.state ? `, ${practice.state}` : ''}
  </div>
</footer>
